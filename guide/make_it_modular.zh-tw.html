<!doctype html>
<html class="no-js" lang="zh-tw">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>learnyounode Guide</title>
        <meta name="description" content="learn git and github">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/code.css">
        <link href='assets/fonts/fonts.css' rel='stylesheet' type='text/css'>
    </head>
    <body>
      <!--[if lt IE 8]>
          <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->

        <header class="site-header">
  <div class="nav u-posFixed">
    <ul class="nav-lang">
        <li><a href="make_it_modular.html" >English</a></li>
        <li><a href="make_it_modular.es.html" >Español</a></li>
        <li><a href="make_it_modular.fr.html" >Français</a></li>
        <li><a href="make_it_modular.ja.html" >日本語</a></li>
        <li><a href="make_it_modular.pt-br.html" >Português (Brasil)</a></li>
        <li><a href="make_it_modular.ru.html" >Русский</a></li>
        <li><a href="make_it_modular.zh-cn.html" >中文 (中国)</a></li>
        <li><a href="make_it_modular.zh-tw.html" >中文 (臺灣)</a></li>
    </ul>
    <div class="wrap-width u-textCenter">
      <a href="filtered_ls.zh-tw.html"
        <span class="u-floatLeft hand">☜</span>
      </a>
      <a class="filledblock" href="index.zh-tw.html">learnyounode</a>
      <a href="http_client.zh-tw.html"
        <span class="u-floatRight hand">☞</span>
      </a>
    </div>
  </div>
  
  <div class="wrapper">
    <div class="u-floatLeft">
      <span class="all-caps">CHALLENGE</span>
      <h2 class="challenge-name">MAKE IT MODULAR</h2>
    </div>
    <div class="u-floatRight u-textRight">
      <span class="all-caps">NUMBER</span>
      <h2 class="challenge-name">6 / 13</h2>
    </div>
  </div>
</header>
      <div class="wrapper">

        <p>這個習題和前一個習題相同，不過這個習題主要是介紹 <strong>模組（modules）</strong> 的內容。您將需要建立兩個檔案：模組與程式本身，來解決這個習題。</p>
<p>撰寫一個以副檔名作為篩選條件，列出指定資料夾內檔案的程式。程式的第一個參數是目錄的路徑，第二個參數則是篩選用的副檔名。檔案列表應該要顯示在命令列上，一個檔案一列。您 <strong>必須</strong> 使用非同步（asynchronous）的方式讀取目錄。</p>
<p>您必須撰寫一個 <em>模組（module）</em> 檔案以執行大部分的工作。這個模組必須 <em>對外提供（export）</em> 一個單一的函式，這個函式可接受 <em>三個</em> 參數，分別是：目錄名稱，副檔名，以及一個 callback 函式。這個函式所用的副檔名必須和傳給您程式的副檔名相同。也就是說，請不要預先把傳遞給模組函式的副檔名轉換成正規表達式（）或在前面加上一個「.」還是其他的事情，就只要單純的把這個副檔名傳給您的模組。在模組中，您可以做任何您需要進行的處理以完成您的篩選工作。</p>
<p>callback 函式必須符合一般的 node(err, data) 慣例。這個慣例規定除非出現錯誤，否則傳給 callback 函式的第一個參數一定是 null ，而第二個參數是您的資料。在這個狀況中，拿到的資料將是以 Array 呈現，篩選後的檔案列表。如果您收到任何錯誤，例如來自您呼叫的 <code>fs.readdir()</code> ，這個 callback 函式必須收到只有一個錯誤的參數。</p>
<p>模組檔案 <em>絕對</em> 不能直接輸出任何內容到終端機，只有您的程式可以。 </p>
<p>如果您原始的檔案收到任何錯誤，簡單的檢查這個錯誤並且把錯誤訊息顯示到終端機上。</p>
<p>您的模組必須遵守底下四個規範：</p>
<ol>
<li>對外提供一個單一功能，確實使用上述的參數。</li>
<li>確實執行一次提供的 callback 函式，並給予一個錯誤，或是上述的資料。</li>
<li>不可以修改任何其他東西，例如全域（Global）變數或是標準輸出（stdout）。</li>
<li>處理可能發生的所有錯誤，並且把錯誤傳遞給 callback 函式。</li>
</ol>
<p>如果確實的遵守以上的規範，您的模組就可以被其他熟知這個規範的人使用。如此一來，您的模組就可以被任何其他作過 learnyounode 的人，或是其他驗證器執行。</p>
<hr>
<h2 id="-">提示</h2>
<p>建立一個模組，包含您的目錄閱讀及篩選功能。要定義（define）出要 <em>對外提供（export）</em> 的 <em>單一函式（single function）</em> ，要把您提供的函式指派給 <code>module.exports</code> 物件，並覆寫原本的內容：</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(args)</span> </span>{ <span class="hljs-comment">/* ... */</span> }
</code></pre>
<p>或是您可以使用一個變數來命名這個函式，並把變數指派給 <code>module.exports</code> 物件。</p>
<p>要在您原本的程式裡使用您建立的新模組，可以用像使用 <code>require(&#39;fs&#39;)</code> 以載入 <code>fs</code> 模組的方式呼叫 <code>require()</code> 方法。唯一不同的地方是，放在此處的模組必須以「./」開頭。所以，如果您的檔案名稱是 mymodule.js ，載入模組的方法就是：</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> mymodule = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./mymodule.js'</span>)
</code></pre>
<p>「.js」副檔名是選擇性加入的，您將會常常看到這個副檔名被省略</p>
<p>現在，模組裡的 <code>module.exports</code> 物件將會被指派到 <code>mymodule</code> 變數。因為您已經提供了一個單一功能， <code>mymodule</code> 就成了一個您可以呼叫的函式。</p>
<p>當然，您還是需要謹記在心，檢查錯誤並及早回應到 callback 函式裡是慣例。</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span> <span class="hljs-params">(callback)</span> </span>{
  foo(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(err, data)</span> </span>{
    <span class="hljs-keyword">if</span> (err)
      <span class="hljs-keyword">return</span> callback(err) <span class="hljs-comment">// early return</span>

    <span class="hljs-comment">// ... no error, continue doing cool things with `data`</span>

    <span class="hljs-comment">// all went well, call callback with `null` for the error argument</span>

    callback(<span class="hljs-literal">null</span>, data)
  })
}
</code></pre>
<hr>


        <div class="prenext">
  <div class="u-floatLeft">
    <a href="filtered_ls.zh-tw.html" class="u-inline-block all-caps">FILTERED LS
    <div>⤶ </div>
    </a>
  </div>
  <div class="u-textRight u-floatRight">
    <a href="http_client.zh-tw.html" class="u-inlineBlock all-caps">HTTP CLIENT
    <div>⤷</div>
    </a>
  </div>
</div>
<footer>
  <!-- <ul>
    <li class="all-caps"><a href="index.html"><strong>Challenges</strong></a></li>
    <li class="all-caps">
      <a href="https://github.com/rvagg/learnyounode/issues/new" target="_blank">Open an Issue</a>
    </li>
  </ul> -->
</footer>

      </div>
    </body>
</html>